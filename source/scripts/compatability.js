const compatibilityData = {
    "compatibility": [
        {
            "pair": [["Aries", "Aries"], ["Taurus", "Taurus"], ["Gemini", "Gemini"], ["Cancer", "Cancer"], ["Leo", "Leo"], ["Virgo", "Virgo"], ["Libra", "Libra"], ["Scorpio", "Scorpio"], ["Sagittarius", "Sagittarius"], ["Capricorn", "Capricorn"], ["Aquarius", "Aquarius"], ["Pisces", "Pisces"]],

            "description": "As they say, how can you love somebody else unless you love yourself? If you date someone of the same sign, congratulations. You've probably embraced your quirks and accepted your humanity. Now, you can celebrate that with a kindred spirit! If you haven't learned to love yourself, warts and all, this relationship can inspire some crucial self-acceptance. Remember, though: #twinning might be comfortable, but autonomy is important to keep that frisky friction. Maintain some separation between your lives, even if it's easy to hang out together. Otherwise, passion may cool to a brother-sister vibe."
        },
        {
            "pair": [
                ["Aries", "Pisces"],
                ["Aries", "Taurus"],
                ["Taurus", "Aries"],
                ["Taurus", "Gemini"],
                ["Gemini", "Taurus"],
                ["Gemini", "Cancer"],
                ["Cancer", "Gemini"],
                ["Cancer", "Leo"],
                ["Leo", "Cancer"],
                ["Leo", "Virgo"],
                ["Virgo", "Leo"],
                ["Virgo", "Libra"],
                ["Libra", "Virgo"],
                ["Libra", "Scorpio"],
                ["Scorpio", "Libra"],
                ["Scorpio", "Sag"],
                ["Sag", "Scorpio"],
                ["Sag", "Capricorn"],
                ["Capricorn", "Sag"],
                ["Capricorn", "Aquarius"],
                ["Aquarius", "Capricorn"],
                ["Aquarius", "Pisces"],
                ["Pisces", "Aquarius"],
                ["Pisces", "Aries"]
            ],
            "description": "Like next-door neighbors with a completely different style of decorating, gardening, and living, the signs on either side of yours can stir up an instant love/hate vibe. Of course, all that friction can lead to explosive sexual chemistry, even an obsessive quest to figure each other out (you never will). Some astrologers believe that each sign is an evolved version of the one before it. The sign after yours is a teacher. However, like a rebellious teen seeking emancipation from a parent, you may never admit that this person has taught you anything. This cosmic combination can make for painful breakups and a seething sexual tension that lingers for a lifetime."
        },
        {
            "pair": [
                ["Aries", "Sagittarius"],
                ["Aries", "Aquarius"],
                ["Taurus", "Pisces"],
                ["Taurus", "Cancer"],
                ["Gemini", "Aries"],
                ["Gemini", "Leo"],
                ["Cancer", "Taurus"],
                ["Cancer", "Virgo"],
                ["Leo", "Gemini"],
                ["Leo", "Libra"],
                ["Virgo", "Cancer"],
                ["Virgo", "Scorpio"],
                ["Libra", "Leo"],
                ["Libra", "Sagittarius"],
                ["Scorpio", "Virgo"],
                ["Scorpio", "Capricorn"],
                ["Sagittarius", "Libra"],
                ["Sagittarius", "Aquarius"],
                ["Capricorn", "Scorpio"],
                ["Capricorn", "Pisces"],
                ["Aquarius", "Sagittarius"],
                ["Aquarius", "Aries"],
                ["Pisces", "Capricorn"],
                ["Pisces", "Taurus"]
            ],
            "description": "It's easy and breezy to date a person who lives two zodiac signs away. Your signs are always of a compatible 'element' (for example, they're a water sign and you're an earth sign, which are both of the 'feminine' quality), making this a great match. You'll often have similar values and attitudes about politics, raising a family, which movies to rent. Friendship and communication are the hallmarks of this aspect.\n\nBeing best friends is easy. Keeping the sexy spark alive? A little challenging. You'll need to structure 'date nights' or set up scenarios that get you out of buddy mode."
        },
        {
            "pair": [
                ["Aries", "Cancer"],
                ["Aries", "Capricorn"],
                ["Taurus", "Aquarius"],
                ["Taurus", "Leo"],
                ["Gemini", "Pisces"],
                ["Gemini", "Virgo"],
                ["Cancer", "Aries"],
                ["Cancer", "Libra"],
                ["Leo", "Taurus"],
                ["Leo", "Scorpio"],
                ["Virgo", "Gemini"],
                ["Virgo", "Sagittarius"],
                ["Libra", "Cancer"],
                ["Libra", "Capricorn"],
                ["Scorpio", "Leo"],
                ["Scorpio", "Aquarius"],
                ["Sagittarius", "Virgo"],
                ["Sagittarius", "Pisces"],
                ["Capricorn", "Aries"],
                ["Capricorn", "Libra"],
                ["Aquarius", "Scorpio"],
                ["Aquarius", "Taurus"],
                ["Pisces", "Gemini"],
                ["Pisces", "Sagittarius"]
            ],
            "description": "The square aspect is a harsh, 90-degree angle between two signs that creates a push-pull dynamic. It's the relationship that helps you work through issues with a difficult parent, usually by reactivating old, painful wounds. There can be power struggles and clashing agendas. Don't expect to kick back and put your feet up in this match.\n\nThe dynamic tension will keep you active and keyed up. Of course, that could be exactly what you want. The opportunity of the 'square' aspect is to teach you how to compromise with an equally strong-willed partner. When you strike that delicate balance, you can make an undeniable 'power couple'—a true force to be reckoned with."
        },
        {
            "pair": [
                ["Aries", "Leo"],
                ["Aries", "Sagittarius"],
                ["Leo", "Aries"],
                ["Leo", "Sagittarius"],
                ["Sagittarius", "Leo"],
                ["Sagittarius", "Aries"],
                ["Taurus", "Virgo"],
                ["Taurus", "Capricorn"],
                ["Virgo", "Taurus"],
                ["Virgo", "Capricorn"],
                ["Capricorn", "Virgo"],
                ["Capricorn", "Taurus"],
                ["Gemini", "Libra"],
                ["Gemini", "Aquarius"],
                ["Libra", "Gemini"],
                ["Libra", "Aquarius"],
                ["Aquarius", "Libra"],
                ["Aquarius", "Gemini"],
                ["Cancer", "Scorpio"],
                ["Cancer", "Pisces"],
                ["Scorpio", "Cancer"],
                ["Scorpio", "Pisces"],
                ["Pisces", "Scorpio"],
                ["Pisces", "Cancer"]
            ],
            "description": "Ah, home, sweet home. The trine sign mate has the same 'element' as yours (fire, earth, air, or water), creating an unspoken kinship and harmony in this good match. At last, you don't have to constantly explain yourself. You've never felt so comfortable, so understood on a core level. This is the person you can burp and fart around or pee with the door open when they're home. But don't invest in a wardrobe full of elastic waistbands just yet.\n\nIn trine relationships, you'll need to preserve some mystery to keep things exciting. Make sure you stay active and on the go, and don't do everything together. A little autonomy goes a long way to keep the passion alive."
        },
        {
            "pair": [
                ["Aries", "Virgo"],
                ["Aries", "Scorpio"],
                ["Taurus", "Libra"],
                ["Taurus", "Sagittarius"],
                ["Gemini", "Scorpio"],
                ["Gemini", "Capricorn"],
                ["Cancer", "Sagittarius"],
                ["Cancer", "Aquarius"],
                ["Leo", "Capricorn"],
                ["Leo", "Pisces"],
                ["Virgo", "Aquarius"],
                ["Virgo", "Aries"],
                ["Libra", "Pisces"],
                ["Libra", "Taurus"],
                ["Scorpio", "Aries"],
                ["Scorpio", "Gemini"],
                ["Sagittarius", "Taurus"],
                ["Sagittarius", "Cancer"]
            ],
            "description": "This is a fascinating, complex combination that defies explanation—the original odd couple. You'll either feel like you're with your soul mate or the devil incarnate. 'How did those two end up together?' people will wonder. Your bond is intense, unspoken, almost secretive in a way.\n\nThe person five signs away from your sign has nothing in common with you astrologically. You'll need to adapt to your differences, which could take a great deal of adjustment, even discarding a former lifestyle. For one of you, the relationship will be about sex and intimacy; for the other, duty and service. If you've both done the requisite self-awareness work, you can make a formidable team when you pool your strengths. You might also come together for karmic purposes—for example, to have a child."
        },
        {
            "pair": [
                ["Aries", "Libra"],
                ["Libra", "Aries"],
                ["Taurus", "Scorpio"],
                ["Scorpio", "Taurus"],
                ["Gemini", "Sagittarius"],
                ["Sagittarius", "Gemini"],
                ["Cancer", "Capricorn"],
                ["Capricorn", "Cancer"],
                ["Leo", "Aquarius"],
                ["Aquarius", "Leo"],
                ["Virgo", "Pisces"],
                ["Pisces", "Virgo"]
            ],
            "description": "Your opposite sign lives directly across the zodiac wheel from you. However, you've got more in common than the name suggests. This sign can be highly compatible, even a soul twin match. You each have a distinct role, but you're a tag team, too. With an opposite sign, you're challenged to grow as a person and take responsibility for your part of the relationship.\n\nWe tend to view things from a close-up, missing the whole picture by hyper-focusing on a detail or two. With an opposite sign, your life appears in full relief, like a finished painting. Suddenly, it all makes sense. This can be a little uncomfortable, but if you've manifested an opposite sign partnership, it means you're ready to grow up."
        }
    ]
};

  
function findDescription(sign1, sign2) {
    // 遍历配对集合
    for (const compatibility of compatibilityData.compatibility) {
        const pair = compatibility.pair;
        const description = compatibility.description;
      
        // 检查输入的星座是否在当前配对中
        if (pair.some(([a, b]) => {
            return (a === sign1 && b === sign2) || (a === sign2 && b === sign1);
        })) {
            return description;
        }
    }
    
    // 如果没有找到匹配的描述，则返回空
    return null;
}
  
// 示例用法
const sign1 = "Aries";
const sign2 = "Leo";
const description = findDescription(sign1, sign2);
console.log(description);

/************************************ */



// get the shape element
const shape_left=document.querySelector('.shape-left');
const shape_right=document.querySelector('.shape-right');
const love_content=document.getElementById('description');
const choose_sign_window=document.getElementById('choose-sign');

//const result_window=document.getElementById('result');

const capricorn_sign=document.getElementById('Capricorn');
const cancer_sign=document.getElementById('Cancer');
const aquarius_sign=document.getElementById('Aquarius');
const gemini_sign=document.getElementById('Gemini');
const leo_sign=document.getElementById('Leo');
const libra_sign=document.getElementById('Libra');
const pisces_sign=document.getElementById('Pisces');
const sagittarius_sign=document.getElementById('Sagittarius');
const scorpio_sign=document.getElementById('Scorpio');
const taurus_sign=document.getElementById('Taurus');
const virgo_sign=document.getElementById('Virgo');
const aries_sign=document.getElementById('Aries');

var clickCount=0;


function checkCompatibility() {
    var leftBox = document.querySelector(".shape-left .sign-name").textContent.trim();
    var rightBox = document.querySelector(".shape-right .sign-name").textContent.trim();
    if (leftBox && rightBox) {
      // Both left and right boxes are filled
      // Assuming the signs are stored as lowercase strings
      var sign1 = leftBox;
      var sign2 = rightBox;
      var capitalizedSign1 = sign1.charAt(0).toUpperCase() + sign1.slice(1);
      var capitalizedSign2 = sign2.charAt(0).toUpperCase() + sign2.slice(1);
      var description = findDescription(capitalizedSign1, capitalizedSign2);
      // Assuming you want to display the description in the element with id "description"
      document.getElementById("popup-description").textContent = description;
      console.log(description);
    }
}

// add click eventlistener to each sign
// capricorn
capricorn_sign.addEventListener('click',function(){
    const image ='../assets/zodiac_sign/capricorn.png';
    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;
    }
    checkCompatibility();
  
  clickCount++;
  handleClick();
});
//cancer
cancer_sign.addEventListener('click',function(){
    checkCompatibility();
    const image = '../assets/zodiac_sign/cancer.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;

    }
    checkCompatibility();
  clickCount++;
  handleClick();
});
//aquarius
aquarius_sign.addEventListener('click',function(){
    
    const image = '../assets/zodiac_sign/aquarius.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;

    }
    checkCompatibility();
  clickCount++;
  handleClick();
});

//gemini
gemini_sign.addEventListener('click',function(){
    const image = '../assets/zodiac_sign/gemini.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;       
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;

    }
    checkCompatibility();
  clickCount++;
  handleClick();
});

//leo
leo_sign.addEventListener('click',function(){
    
    const image = '../assets/zodiac_sign/leo.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;

    }
    checkCompatibility();
  clickCount++;
  handleClick();
});

//libra
libra_sign.addEventListener('click',function(){
    
    const image = '../assets/zodiac_sign/libra.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;

    }
    checkCompatibility();
  clickCount++;
  handleClick();
});
//pisces
pisces_sign.addEventListener('click',function(){
    
    const image = '../assets/zodiac_sign/pisces.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;

    }
    checkCompatibility();
  clickCount++;
  handleClick();
});

//sagittarius
sagittarius_sign.addEventListener('click',function(){

    const image = '../assets/zodiac_sign/sagittarius.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;

    }
    checkCompatibility();
  clickCount++;
  handleClick();
});

//scorpio
scorpio_sign.addEventListener('click',function(){
    
    const image = '../assets/zodiac_sign/scorpio.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;
    }
    checkCompatibility();
  clickCount++;
  handleClick();
});
//taurus
taurus_sign.addEventListener('click',function(){
    
    const image = '../assets/zodiac_sign/taurus.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;
    }
    checkCompatibility();
  clickCount++;
  handleClick();
});

//virgo
virgo_sign.addEventListener('click',function(){
    
    const image = '../assets/zodiac_sign/virgo.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id;
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id;
    }
    checkCompatibility();
  clickCount++;
  handleClick();
});

//aries
aries_sign.addEventListener('click',function(){
    
    const image = '../assets/zodiac_sign/aries.png';

    const shape_pos = clickCount === 0 ? 'left' : 'right';

    if(shape_pos === 'left'){
        shape_left.style.backgroundImage = `url(${image})`;
        shape_left.style.backgroundSize ='cover';
        shape_left.querySelector('.sign-name').textContent=this.id
    }else{
        shape_right.style.backgroundImage=`url(${image})`;
        shape_right.style.backgroundSize='cover';
        shape_right.querySelector('.sign-name').textContent=this.id

    }
    checkCompatibility();
  clickCount++;
  handleClick();


});



shape_left.addEventListener('click', function() {
    shape_left.style.backgroundImage = ''; // Remove background image from shapeLeft
    if(clickCount === 1) clickCount = 0; // Reset click count
    else clickCount=0;

    shape_left.querySelector('.sign-name').textContent='';

    handleClick();
});

// Event listener for shapeRight
shape_right.addEventListener('click', function() {
    shape_right.style.backgroundImage = ''; // Remove background image from shapeRight
    if(clickCount === 1) clickCount = 0; // Reset click count
    else clickCount=0;

    shape_right.querySelector('.sign-name').textContent='';

    handleClick();
});

function handleClick(){
    if(clickCount === 2){
        setTimeout(() => {
        // Show the pop-up
        showPopup();
        choose_sign_window.style.display='none';
            
        }, 300);
        
    }
    else{
        setTimeout(() => {
            hidePopup();
            choose_sign_window.style.display='flex';
        }, 300);
      
    }
}
  

// Function to show the pop-up with description
function showPopup() {
    document.getElementById("popup").style.display = "block";
}

// Function to hide the pop-up and reset the page
function hidePopup() {
    document.getElementById("popup").style.display = "none";
}

// Attach event listener to the close button
document.getElementById("popup-close").addEventListener("click", function() {
    hidePopup();
    clickCount=0;
    shape_left.style.backgroundImage='';
    shape_right.style.backgroundImage='';
    shape_left.querySelector('.sign-name').textContent='';
    shape_right.querySelector('.sign-name').textContent='';
    choose_sign_window.style.display='block';
});